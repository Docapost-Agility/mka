!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("mka",[],t):"object"==typeof exports?exports.mka=t():e.mka=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var r=n(1),a=o(r),l=n(2),c=o(l),s=n(3),i=o(s),u=document.getElementById("mka");if(!u)throw new Error("mka id not found");var d={focus:"mka",eltSelectedClass:null,dragNdrop:!0,rightClik:!0,lasso:!0,dropFunction:function(e){console.log(e),console.log("Default drop function, think to implement this function")}};d.actions=[],document.onkeydown=function(e){d.actions[d.focus+"-arrow"](e)},HTMLElement.prototype.mkaInit=function(e){console.log("on init"),Object.keys(e).map(function(t){d[t]=e[t]}),d.rightClik&&a.active(u,d),d.dragNdrop&&c.active(u,d),i.active(u,d)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(t.active=function(e,t){t.actions["rc-arrow"]=o;e.addEventListener("contextmenu",function(n){n.preventDefault();var o=document.getElementsByClassName("mka-elt-selected");if(1===o.length&&o[0].hasAttribute("mka-rc-menu-items")){var r='<div id="mkarcmenu"><ul>';JSON.parse(o[0].getAttribute("mka-rc-menu-items")).forEach(function(e){r+="<li>"+e.title+"</li>"}),r+="</ul></div>",e.innerHTML+=r;var a=document.getElementById("mkarcmenu");a.style.position="absolute",a.style.left=n.pageX+"px",a.style.top=n.pageY+"px",t.focus="rc"}}),document.body.onmousedown=function(){document.getElementById("mkarcmenu")&&document.getElementById("mkarcmenu").remove()}},function(e){console.log(e)})},function(e,t,n){"use strict";function o(e){e.addEventListener("dragover",function(e){this.classList.add("mka-dropzone-hover"),e.preventDefault()}),e.addEventListener("dragleave",function(){this.classList.remove("mka-dropzone-hover")}),e.addEventListener("drop",function(e){var t=mka.getElementsByClassName("mka-elt-selected");console.log(t),alert("Voulez vous vraiment ... "),r.dropFunction([1,2]),Array.from(t).map(function(e){e.parentNode.removeChild(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.bindDropEvents=o;var r=null,a=t.bindDragEvents=function(e){var t=mka.getElementsByClassName("mka-elt-selected");e.addEventListener("dragstart",function(e){Array.from(t).map(function(e){return e.classList.add("on-drag")})}),e.addEventListener("dragend",function(e){Array.from(t).map(function(e){return e.classList.remove("on-drag")})})};t.active=function(e,t){r=t;var n=document.querySelectorAll(".mka-elt"),l=document.querySelectorAll(".mka-dropzone");Array.from(n).map(function(e){a(e)}),Array.from(l).map(function(e){return o(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=null,r={downX:null,downY:null,upX:null,upY:null},a=!1,l=function(){var e=document.createElement("div");return e.id="selection",o.appendChild(e),e.style.position="absolute",e.style.backgroundColor="rgba(255,0,0,0.5)",e.style.border="1px solid rgba(255,0,0,0.8)",e},c=null,s=function(e){var t=e.path,n=!1;return t.forEach(function(e){if(e.classList){e.classList.forEach(function(e){"mka-elt-selected"===e&&(n=!0)})}}),n},i=function(e,t){return r.upX=e.pageX+0,r.upY=e.pageY+0,m(),!(!s(e)||t)||(u(e.ctrlKey,t),f(c),!1)},u=(t.active=function(e,t){o=e,o.style.userSelect="none",o.onmousedown=function(e){a=!1,1!==e.which&&3!==e.which||(r.downX=e.pageX+0,r.downY=e.pageY+0,s(e)||1!==e.which||(c=l(),document.body.onmousemove=function(e){a=!0,i(e,!1)}))},window.onmouseup=function(e){a||i(e,!0),a=!1;var n=document.getElementsByClassName("mka-elt");Array.from(n).map(function(e){t.dragNdrop&&(e.draggable=e.classList.contains("mka-elt-selected"))}),1!==e.which&&3!==e.which||(document.body.onmousemove=function(){},d())},t.actions["mka-arrow"]=function(e){var t=e.which;if(37==t||38==t||39==t||40==t){var n=document.getElementsByClassName("mka-elt-selected"),o=n[n.length-1];if(!event.ctrlKey){var r=document.getElementsByClassName("mka-elt");Array.from(r).map(function(e){e.classList.remove("mka-elt-selected")})}if(o)switch(e.which){case 37:console.log("left");break;case 38:console.log("up");var a=o.previousElementSibling;a&&(a.classList.add("mka-elt-selected"),a.draggable=!0);break;case 39:console.log("right");break;case 40:var l=o.nextElementSibling;l&&(l.classList.add("mka-elt-selected"),l.draggable=!0);break;default:return}}},o.onclick=function(){t.focus="mka"}},function(e,t){var n=document.getElementsByClassName("mka-elt"),o=[],a=!1;return Array.from(n).map(function(n){var l=n.getBoundingClientRect(),c={x1:n.offsetLeft,x2:n.offsetLeft+l.width,y1:n.offsetTop,y2:n.offsetTop+l.height};r.x2>=c.x1&&c.x2>=r.x1&&r.y2>=c.y1&&c.y2>=r.y1?t&&n.classList.contains("mka-elt-selected")?(e?n.classList.remove("mka-elt-selected"):(n.classList.add("mka-elt-selected"),o.push(n)),a=!0):(n.classList.add("mka-elt-selected"),o.push(n)):e||n.classList.remove("mka-elt-selected")}),document.getElementById("mka-count").innerHTML=o.length,a}),d=function(){console.log("delete");var e=document.getElementById("selection");e&&o.removeChild(e)},m=function(){r.x1=r.downX,r.x2=r.upX,r.y1=r.downY,r.y2=r.upY,r.downX>r.upX&&(r.x1=r.upX,r.x2=r.downX),r.downY>r.upY&&(r.y1=r.upY,r.y2=r.downY)},f=function(e){e.style.top=r.y1+"px",e.style.left=r.x1+"px",e.style.width=r.x2-r.x1+"px",e.style.height=r.y2-r.y1+"px"}}])});
//# sourceMappingURL=mka.min.js.map